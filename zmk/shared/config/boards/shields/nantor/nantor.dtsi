#include <dt-bindings/zmk/matrix_transform.h>
#define MODE (GPIO_ACTIVE_LOW | GPIO_PULL_UP)

/ {
  chosen {
    zmk,kscan = &kscan0;
    zmk,matrix_transform = &default_transform;
  };

  default_transform: keymap_transform_0 {
    compatible = "zmk,matrix-transform";
    rows = <1>;
    columns = <42>;
    map = <
               RC(0,0)  RC(0,1)  RC(0,2)  RC(0,3)  RC(0,4)     RC(0,21) RC(0,22) RC(0,23) RC(0,24) RC(0,25)
      RC(0,5)  RC(0,6)  RC(0,7)  RC(0,8)  RC(0,9)  RC(0,10)    RC(0,26) RC(0,27) RC(0,28) RC(0,29) RC(0,30) RC(0,31)
      RC(0,11) RC(0,12) RC(0,13) RC(0,14) RC(0,15) RC(0,16)    RC(0,32) RC(0,33) RC(0,34) RC(0,35) RC(0,36) RC(0,37)
                        RC(0,17) RC(0,18) RC(0,19) RC(0,20)    RC(0,38) RC(0,39) RC(0,40) RC(0,41)
    >;
  };

  kscan0: kscan {
    compatible = "zmk,kscan-gpio-direct";
    input-gpios =
                             <&blackpill 21 MODE>,<&blackpill 29 MODE>,<&blackpill 28 MODE>,<&blackpill 27 MODE>,<&blackpill 26 MODE>,
        <&blackpill 19 MODE>,<&blackpill 45 MODE>,<&blackpill 41 MODE>,<&blackpill 40 MODE>,<&blackpill 39 MODE>,<&blackpill 38 MODE>,
        <&blackpill 46 MODE>,<&blackpill 14 MODE>,<&blackpill 15 MODE>,<&blackpill 16 MODE>,<&blackpill 17 MODE>,<&blackpill 18 MODE>,
                                                  <&blackpill 13 MODE>,<&blackpill 12 MODE>,<&blackpill 11 MODE>,<&blackpill 10 MODE>;
  };
};
